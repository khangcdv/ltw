/*! echo.js v1.7.2 | (c) 2014 @toddmotto | https://github.com/toddmotto/echo */
!function(t,e){"function"==typeof define&&define.amd?define(function(){return e(t)}):"object"==typeof exports?module.exports=e:t.echo=e(t)}(this,function(u){"use strict";function r(){!a&&t||(clearTimeout(t),t=setTimeout(function(){i.render(),t=null},c))}var d,t,c,a,l,i={},f=function(){};return i.init=function(t){var e=(t=t||{}).offset||0,n=t.offsetVertical||e,o=t.offsetHorizontal||e,e=function(t,e){return parseInt(t||e,10)};d={t:e(t.offsetTop,n),b:e(t.offsetBottom,n),l:e(t.offsetLeft,o),r:e(t.offsetRight,o)},c=e(t.throttle,250),a=!1!==t.debounce,l=!!t.unload,f=t.callback||f,i.render(),document.addEventListener?(u.addEventListener("scroll",r,!1),u.addEventListener("load",r,!1)):(u.attachEvent("onscroll",r),u.attachEvent("onload",r))},i.render=function(t){for(var e,n,o=(t||document).querySelectorAll("[data-echo], [data-echo-background]"),r=o.length,c={l:0-d.l,t:0-d.t,b:(u.innerHeight||document.documentElement.clientHeight)+d.b,r:(u.innerWidth||document.documentElement.clientWidth)+d.r},a=0;a<r;a++)!function(t,e){if(null===t.offsetParent)return!1;t=t.getBoundingClientRect();return t.right>=e.l&&t.bottom>=e.t&&t.left<=e.r&&t.top<=e.b}(n=o[a],c)?l&&(e=n.getAttribute("data-echo-placeholder"))&&(null!==n.getAttribute("data-echo-background")?n.style.backgroundImage="url("+e+")":n.src=e,n.removeAttribute("data-echo-placeholder"),f(n,"unload")):(l&&n.setAttribute("data-echo-placeholder",n.src),null!==n.getAttribute("data-echo-background")?n.style.backgroundImage="url("+n.getAttribute("data-echo-background")+")":n.src!==(e=n.getAttribute("data-echo"))&&(n.src=e),l||(n.removeAttribute("data-echo"),n.removeAttribute("data-echo-background")),f(n,"load"));r||i.detach()},i.detach=function(){document.removeEventListener?u.removeEventListener("scroll",r):u.detachEvent("onscroll",r),clearTimeout(t)},i});